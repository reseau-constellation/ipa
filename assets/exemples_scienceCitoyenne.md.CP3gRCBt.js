import{_ as s,c as i,o as a,a3 as n}from"./chunks/framework.COm4hYgr.js";const E=JSON.parse('{"title":"Science citoyenne","description":"","frontmatter":{},"headers":[],"relativePath":"exemples/scienceCitoyenne.md","filePath":"exemples/scienceCitoyenne.md"}'),e={name:"exemples/scienceCitoyenne.md"},t=n(`<h1 id="science-citoyenne" tabindex="-1">Science citoyenne <a class="header-anchor" href="#science-citoyenne" aria-label="Permalink to &quot;Science citoyenne&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">NOTE</p><p>Nous y travaillons... revenez plus tard, ou, encore mieux, <a href="mailto:julien.malard@mail.mcgill.ca" target="_blank" rel="noreferrer">contactez-nous !</a></p></div><p>Constellation peut servir de système de collecte de données de science citoyenne.</p><p>[Schéma diffusion données à inclure]</p><nav class="table-of-contents"><ul><li><a href="#le-projet">Le projet</a></li><li><a href="#les-donnees">Les données</a><ul><li><a href="#creation-des-variables">Création des variables</a></li><li><a href="#validation">Validation</a></li></ul></li><li><a href="#autorisations">Autorisations</a></li><li><a href="#collecte-de-donnees">Collecte de données</a></li><li><a href="#visualisation">Visualisation</a></li><li><a href="#sauvegardes-automatisees">Sauvegardes automatisées</a></li><li><a href="#acces-programmatique">Accès programmatique</a><ul><li><a href="#acces-de-python">Accès de Python</a></li></ul></li></ul></nav><h2 id="le-projet" tabindex="-1">Le projet <a class="header-anchor" href="#le-projet" aria-label="Permalink to &quot;Le projet&quot;">​</a></h2><p>Nous allons utiliser comme exemple un projet (fictif) de science citoyenne de collecte d&#39;information sur les niveaux d&#39;eau dans un cours d&#39;eau. L&#39;idée est que différentes personnes contribueront toutes des données provenant de différents endroits sur le cours d&#39;eau, tout en pouvoir visualiser les données des autres participants au projet.</p><p>Pour ce faire, nous utilisersons une <a href="./../guide/concepts.html#nuee"><code>nuée</code></a> Constellation pour regrouper toutes nos contributions, de même que pour contrôler l&#39;accès à la contribution de données. (La lecture des données, par contre, sera ouverte à toutes.)</p><div class="tip custom-block"><p class="custom-block-title">CONSEIL</p><p>Nous avons deux options pour structurer les contributions de nos participantes. L&#39;une serait de créer une seule base de données et ensuite d&#39;y donner accès à toutes les personnes qui participeront au projet. L&#39;autre est de créer une structure type pour les données (une <a href="./../guide/concepts.html#nuee"><code>nuée</code></a>) et puis d&#39;inviter les participants à <strong>créer leur propre base de données individuelle</strong> suivant le schéma commun. Nous allons suivre la deuxième approche, car elle nous permet d&#39;inviter mais aussi de désinviter les membres du groupe (les invitations à une base de donneés commune, au contraire, étant irréversibles), en plus d&#39;être plus efficace en termes d&#39;utilisation de mémoire.</p></div><h2 id="les-donnees" tabindex="-1">Les données <a class="header-anchor" href="#les-donnees" aria-label="Permalink to &quot;Les données&quot;">​</a></h2><p>En premier, nous allons choisir la structure de nos données. Pour chaque observation, nous voulous la date, l&#39;endroit, le niveau d&#39;eau et une photo du cours d&#39;eau. Voici un exemple potentiel :</p><table><thead><tr><th>Date</th><th>Endroit</th><th>Niveau d&#39;eau</th><th>Image</th></tr></thead><tbody><tr><td>01 - 01 -2023</td><td>A</td><td>40</td><td>photo325.jpeg</td></tr><tr><td>03 - 01 -2023</td><td>A</td><td>37</td><td>photo328.jpeg</td></tr><tr><td>...</td><td>...</td><td>...</td><td>...</td></tr></tbody></table><p>Ensuite, pour garder compte de l&#39;information sur nos zônes d&#39;observation, nous allons créer un second tableau. Comme ça, nous ne dédoublons pas l&#39;information de latitude, longitude et altitude à chaque observation dans le tableau ci-dessus.</p><table><thead><tr><th>Endroit</th><th>Latitude</th><th>Longitude</th><th>Altitude</th></tr></thead><tbody><tr><td>A</td><td>1</td><td>2</td><td>3</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">CONSEIL</p><p>Nous avons deux possibilités pour le tableau des informations de site. Nous pouvions soit préciser les endroits permis pour l&#39;entrée de données et ainsi limiter les contributions à des endroits géographiques que nous aurions pré-choisis, soit inclure le tableau des endroits d&#39;observation dans notre nuée et ainsi permettre aux utilisatrices d&#39;ajouter ou de définir leurs propres endroits d&#39;observation. Pour ce tutoriel, nous avons choisi la seconde option.</p></div><p>Chaque personne qui participe au projet de science citoyenne aura sa propre copie des données ci-dessus. Celles-ci seront regroupées par notre nuées, qui définira les règles de participation et de contribution de données.</p><p>Nous avons donc sept variables, dont 1 date, 3 numériques, 1 image et 1 chaîne (texte).</p><h3 id="creation-des-variables" tabindex="-1">Création des variables <a class="header-anchor" href="#creation-des-variables" aria-label="Permalink to &quot;Création des variables&quot;">​</a></h3><p>Nous allons maintenant construire notre structure de données selon le schéma que nous avons établit ci-dessus. Nous allons ajouter deux tableaux à notre nuée et spécifier leurs colonnes et variables. Pour le premier tableau, vous pouvez spécifier les colonnes de date et d&#39;endroit en tant que colonnes indexes, et, pour le deuxième, la colonne endroit.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Une colonne indexe est une colonne (ou un groupe de colonnes) dont les valeurs ne peuvent être répétées dans le tableau. Dans notre cas, chaque endroit, à un moment précis, ne peut avoir qu&#39;une observation.</p></div><div class="tip custom-block"><p class="custom-block-title">CONSEIL</p><p>Les actions ci-dessous n&#39;ont besoin d&#39;être effectuées <strong>qu&#39;une seule fois</strong> (par vous, pas par vos utilisateurs), lors de la spécification de la nuée. La solution la plus facile est donc de l&#39;effectuer avec votre compte dans l&#39;interface Constellation, et puis d&#39;inclure l&#39;identifiant de la nuée ainsi générée dans le code de votre appli finale (voir ci-dessous). Cependant, nous incluons aussi le code Constellation pour générer la nuée selon les spécifications de l&#39;exemple à titre d&#39;information. Ce sont ces fonctions que l&#39;interface de Constellation invoquera lorsque vous suivrez les instructions visuelles.</p></div><p>[Image à inclure]</p><p>Et voici l&#39;équivalent en code :</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { créerConstellation } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@constl/ipa&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> client</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> créerConstellation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> idVarDate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.variables.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">créerVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ catégorie: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;horoDatage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Il s&#39;agit d&#39;un code unique pour chaque endroit, donc pas de traductions</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> idVarEndroit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.variables.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">créerVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    catégorie: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chaîneNonTraduisible&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> idVarNiveauDEau</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.variables.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">créerVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    catégorie: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;numérique&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> idVarImage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.variables.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">créerVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    catégorie: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Continuer pour les autre variables...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Ajouter noms</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.variables.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sauvegarderNomVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    idVariable: idVarNiveauDEau,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    langue: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fr&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    nom: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Niveau d&#39;eau&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ...continuer pour les autres variables aussi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Créer nuée</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> idNuée</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.nuées.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">créerNuée</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Créer tableaux nuée</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> idTableauObs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.nuées.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ajouterTableauNuée</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    idNuée,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    clefTableau: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;observations&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Une clef unique pour le tableau</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> idTableauEndroits</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.nuées.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ajouterTableauNuée</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    idNuée,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    clefTableau: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;endroits&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Ajouter les variables au tableau d&#39;observation</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (idVariable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [idVarEndroit, idVarDate, idVarNiveauDEau, idVarImage]) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.nuées.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ajouterColonneTableauNuée</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        idTableau: idTableauObs,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        idVariable,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Indexer les données selon l&#39;endroit et la date</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        index: [idVarEndroit, idVarDate].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(idVariable),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ... et faire de même pour le tableau des endroits d&#39;observation</span></span></code></pre></div><h3 id="validation" tabindex="-1">Validation <a class="header-anchor" href="#validation" aria-label="Permalink to &quot;Validation&quot;">​</a></h3><p>Nous allons maintenant ajouter des règles de validation pour les données. Nous garderons ça simple, et spécifierons uniquement que le niveau d&#39;eau doit être positif. Pour plus d&#39;informations sur les règles de validation disponibles dans Constellation, voir la <a href="./../ipa/règles.html">page dédiée</a>.</p><p>[Image à inclure]</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { créerConstellation } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@constl/ipa&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> client</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> créerConstellation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.nuées.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ajouterRègleTableauNuée</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    idTableau: idTableauObs,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    idColonne: idColNiveauDEau,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    règle: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        typeRègle: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bornes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        détails: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fixe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            val: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            op: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt;=&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="autorisations" tabindex="-1">Autorisations <a class="header-anchor" href="#autorisations" aria-label="Permalink to &quot;Autorisations&quot;">​</a></h2><p>Nous pouvons également changer les autorisations de la nuée. Vous pouvez rendre une nuée prive publique et vice-versa, ou bien inviter ou exclure des personnes.</p><p>[Image à inclure]</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.nuées.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exclureMembreDeNuée</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    idNuée,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    idCompte: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id du compte de quelqu&#39;un que je n&#39;aime pas&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="collecte-de-donnees" tabindex="-1">Collecte de données <a class="header-anchor" href="#collecte-de-donnees" aria-label="Permalink to &quot;Collecte de données&quot;">​</a></h2><p>Les participants à votre projet peuvent maintenant collecter des données. Il suffit pour eux d&#39;ouvrir le lien vers votre nuée sur leur propre compte Constellation, de choisir l&#39;option « Créer une base de données » et d&#39;entrer leurs données - soit manuellement, soit d&#39;un fichier existant - dans la nouvelle base de données.</p><p>[Image à inclure]</p><p>Cependant, ce n&#39;est peut-être pas l&#39;expérience que vous désirez pour vous scientifiques citoyens. L&#39;interface de Constellation est conçue pour des chercheuses, avec beaucoup d&#39;options et de boutons, et il serait mieux d&#39;avoir une interface plus simple et dirigée à votre projet. Constellation vous donne donc l&#39;option de créer, automagiquement, une application spécifique à votre projet. Vous pouvez ensuite la distribuer à vos utilisateurs, et leurs contributions apparaîtront directement sur votre tableau de bord.</p><p>[Image à inclure]</p><h2 id="visualisation" tabindex="-1">Visualisation <a class="header-anchor" href="#visualisation" aria-label="Permalink to &quot;Visualisation&quot;">​</a></h2><p>Nous pouvons maintenant visualiser les données dans l&#39;interface Constellation. Créez une base de données sur le gabarit de votre nuée et puis ajoutez-y des données. En retournant sur la page de la nuée, vous verrez que vos données apparaissent dans la nuée.</p><p>Si vous avez une amie dans les parages, partagez-lui l&#39;identifiant de votre nuée et demandez-lui de créer sa propre base de données et d&#39;y ajouter des données. Elles apparaîteront dans la nuée !</p><p>[Image à inclure]</p><p>Vous pouvez également accéder aux données programmatiquement en TypeScript ou JavaScript :</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> données</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.nuées.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">suivreDonnéesTableauNuée</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    idNuée,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    clefTableau: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;observations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    f: console.log,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Ou quelque chose de plus intelligent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="sauvegardes-automatisees" tabindex="-1">Sauvegardes automatisées <a class="header-anchor" href="#sauvegardes-automatisees" aria-label="Permalink to &quot;Sauvegardes automatisées&quot;">​</a></h2><p>Nous voudrons également créer des sauvegardes automatisées des données qui nous parviennent de nos utilisatrices (on ne sait jamais...tasses à café et égouts ouverts peuvent être catastrophiques pour les données sur un téléphone).</p><p>[Image à inclure]</p><h2 id="acces-programmatique" tabindex="-1">Accès programmatique <a class="header-anchor" href="#acces-programmatique" aria-label="Permalink to &quot;Accès programmatique&quot;">​</a></h2><p>Mais ce n&#39;est pas tout ! Vous pouvez également analyser vos données de science citoyenne dans un autre logiciel et faire des analyses en temps réel.</p><p>Tout d&#39;abord, nous allons activer le nœud local Constellation sur l&#39;interface et noter le numéro de port. Ceci nous permettra d&#39;accéder Constellation à partir de notre code Python.</p><p>[Image à inclure]</p><h3 id="acces-de-python" tabindex="-1">Accès de Python <a class="header-anchor" href="#acces-de-python" aria-label="Permalink to &quot;Accès de Python&quot;">​</a></h3><p>[Image à inclure]</p><p>Voici un exemple de code en Python qui vous permettra d&#39;accéder à vos donneés de science citoyenne. Si vous n&#39;êtes pas très très Python, vous pouvez aussi faire la même chose en R ou bien en Julia.</p><p>Pour installer Constellation :</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-2HkzG" id="tab-aF--yXv" checked="checked"><label for="tab-aF--yXv">python (pdm)</label><input type="radio" name="group-2HkzG" id="tab-DEWJh-H"><label for="tab-DEWJh-H">R</label><input type="radio" name="group-2HkzG" id="tab-S7XxCJt"><label for="tab-S7XxCJt">julia</label></div><div class="blocks"><div class="language-sh vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pdm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> constellationPy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trio</span></span></code></pre></div><div class="language-r vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">r</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># install.packages(&quot;devtools&quot;)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">devtools</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">install_github</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;reseau-constellation/client-r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-r vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">r</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add Constellation</span></span></code></pre></div></div></div><p>Et pour accéder les données :</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-EngP1" id="tab-gNYsQMt" checked="checked"><label for="tab-gNYsQMt">python</label><input type="radio" name="group-EngP1" id="tab-qgffrQQ"><label for="tab-qgffrQQ">R</label><input type="radio" name="group-EngP1" id="tab-4ECs38k"><label for="tab-4ECs38k">julia</label></div><div class="blocks"><div class="language-py vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> trio</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> constellationPy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Serveur, ouvrir_client</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Copier l&#39;identifiant de la nuée que vous avez créée</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id_nuée </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/orbitdb/zdpu...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">clef_tableau </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Le numéro de port que l&#39;interface de Constellation vous a donné</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5004</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Cette fonction sera appelée chaque fois que des nouvelles données sont disponibles sur la nuée</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ma_fonction_danalyse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(données):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(données)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Executer votre brillante analyse ici</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> principale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ouvrir_client(port) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        oublier_données </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.suivre_données_tableau_nuée(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            id_nuée</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id_nuée,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            clef_tableau</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">clef_tableau,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ma_fonction_danalyse</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Appeler oublier_données() si vous avez fini. Sinon le code continuera d&#39;attendre les nouvelles données du réseau.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">trio.run(principale)</span></span></code></pre></div><div class="language-r vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">r</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">library</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;constellationR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Copier l&#39;identifiant de la nuée que vous avez créée</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id_nuée</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/orbitdb/zdpu...&quot;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">clef_tableau</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Le numéro de port que l&#39;interface de Constellation vous a donné</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5004</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">analyserDonnées</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(données) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(données)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Faire le reste de votre analyse...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">avecClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(client) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        données </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">$</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obtDonnéesTableauNuée</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            idNuée</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idNuée, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">clefTableau</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> clefTableau</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        analyserDonnées</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(données)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    port</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> port</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Constellation</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># L&#39;identifiant de la nuée et du tableau d&#39;intérêt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">idNuée </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/orbitdb/zdpu...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">clefTableau </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Le numéro de port que l&#39;interface de Constellation vous a donné</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5004</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Constellation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">avecClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(port) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Obtenir les données, en français si possible, sinon en alemand</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    donnéesRéseau </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Constellation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">obtDonnéesTableauNuée</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        client, idNuée, clefTableau, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fr&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;de&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div></div></div><p>Pour plus d&#39;information, voir la section sur les <a href="./../avancé/autresLangages/introduction.html">autres langages</a>.</p>`,58),l=[t];function p(h,r,k,o,d,u){return a(),i("div",null,l)}const g=s(e,[["render",p]]);export{E as __pageData,g as default};
