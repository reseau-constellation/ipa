import{_ as s,c as i,o as a,a4 as e}from"./chunks/framework.DpC1ZpOZ.js";const g=JSON.parse('{"title":"Nœud local","description":"","frontmatter":{},"headers":[],"relativePath":"avancé/autresLangages/nœudLocal.md","filePath":"avancé/autresLangages/nœudLocal.md"}'),n={name:"avancé/autresLangages/nœudLocal.md"},t=e(`<h1 id="nœud-local" tabindex="-1">Nœud local <a class="header-anchor" href="#nœud-local" aria-label="Permalink to &quot;Nœud local&quot;">​</a></h1><p><a href="https://github.com/reseau-constellation/serveur-ws/actions/workflows/tests.yml" target="_blank" rel="noreferrer"><img src="https://github.com/reseau-constellation/serveur-ws/actions/workflows/tests.yml/badge.svg" alt="Serveur WS"></a></p><p>La librairie <code>@constl/serveur</code> vous permet de créer un nœud local Constellation et de le rendre accessible à d&#39;autres logiciels sur votre machine par l&#39;entremise d&#39;un serveur WS local.</p><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>⚠️ Ce serveur <strong>local</strong> n&#39;est pas apte à être utilisé en tant que serveur publique ! Entre autres limitations, <strong>il n&#39;y a aucun contrôle d&#39;authentification et il donne accès illimité à un environnement Node.js</strong>. Il est donc configuré afin d&#39;être uniquement disponible sur localhost. Ce serveur est dédié uniquement à la communication entre processus sur le même ordinateur, lorsque différents processus veulent accéder au même nœud Constellation local.</p><p><strong>N&#39;exposez jamais le serveur WS Constellation sur un port publique.</strong></p></div><h2 id="utilisation" tabindex="-1">Utilisation <a class="header-anchor" href="#utilisation" aria-label="Permalink to &quot;Utilisation&quot;">​</a></h2><p>Si vous voulez tout simplement utiliser Constellation avec Python ou R, veuillez installer les librairies respectives <a href="https://github.com/reseau-constellation/client-python" target="_blank" rel="noreferrer">constellation-py</a>, <a href="https://github.com/reseau-constellation/Consellation.jl" target="_blank" rel="noreferrer">Constellation.jl</a> et <a href="https://github.com/reseau-constellation/client-r" target="_blank" rel="noreferrer">constellation-R</a> (en progrès). Celles-ci se chargeront automatiquement de lancer le serveur Constellation.</p><h2 id="installation-globale" tabindex="-1">Installation globale <a class="header-anchor" href="#installation-globale" aria-label="Permalink to &quot;Installation globale&quot;">​</a></h2><p>L&#39;installation globale vous permet de lancer un nœud local Constellation de la ligne de commande. Si vous comptez simplement utiliser le serveur Constellation (y compris pour une analyse en Python, en R ou en Julia), installez-le comme suit :</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-Ourpi" id="tab-tGgLiQQ" checked><label for="tab-tGgLiQQ">pnpm</label></div><div class="blocks"><div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/reseau-constellation/serveur-ws/principale/installer.cjs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span></code></pre></div></div></div><h3 id="ligne-de-commande" tabindex="-1">Ligne de commande <a class="header-anchor" href="#ligne-de-commande" aria-label="Permalink to &quot;Ligne de commande&quot;">​</a></h3><p>Vous pourrez ensuite lancer le nœud local en spécifiant (ou non) le port, l&#39;identifiant de compte, et les dossiers à utiliser pour sauvegarder les données de votre compte :</p><p><code>$ constl lancer [-p &lt;port&gt;] [--compte &lt;id-compte&gt;] [--doss-orbite &lt;dossierOrbite&gt;] [--doss-sfip &lt;dossierSFIP&gt;]</code></p><p>Si vous ne comprennez pas ce que font les options de compte ou de dossier, laissez-les vides et inquiétez-vous pas ; ça fonctionnera pareil.</p><p>Pour obtenir le numéro de la version :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> constl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span></span></code></pre></div><p>Pour obtenir de l&#39;aide :</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> constl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span></span></code></pre></div><h2 id="utilisation-dans-un-autre-projet" tabindex="-1">Utilisation dans un autre projet <a class="header-anchor" href="#utilisation-dans-un-autre-projet" aria-label="Permalink to &quot;Utilisation dans un autre projet&quot;">​</a></h2><p>Si vous voulez incorporer le serveur Constellation dans une autre librairie JavaScript, vous pouvez l&#39;installer ainsi :</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-h9MDE" id="tab-AnvHP3V" checked><label for="tab-AnvHP3V">pnpm</label><input type="radio" name="group-h9MDE" id="tab-Uj6115C"><label for="tab-Uj6115C">npm</label></div><div class="blocks"><div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @constl/serveur</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @constl/serveur</span></span></code></pre></div></div></div><p>Vous pourrez ensuite importer le serveur dans votre propre code et le lancer programmatiquement.</p><div class="tip custom-block"><p class="custom-block-title">CONSEIL</p><p>Constellation elle-même (<code>@constl/ipa</code>) est spécifiée en tant que dépendance pair du serveur Constellation. Vous pouvez donc installer la version de Constellation qui vous convient.</p></div><h3 id="serveur" tabindex="-1">Serveur <a class="header-anchor" href="#serveur" aria-label="Permalink to &quot;Serveur&quot;">​</a></h3><div class="language-JavaScript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { lancerServeur } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@constl/serveur&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fermerServeur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lancerServeur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// \`port\` contient maintenant le numéro de port à utiliser dans le client</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Lorsqu&#39;on a fini :</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fermerServeur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>Invoqué sans configuration, <code>lancerServeur</code> trouvera un port disponible sur <code>localhost</code> et redonnera cette valeur dans la variable <code>port</code>. Vous pouvez également spécifier une configuration Constellation plus précise :</p><div class="language-TypeScript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { lancerServeur } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@constl/serveur&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fermerServeur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lancerServeur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  port: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5003</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optsConstellation: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    orbite: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      dossier: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mon-dossier-orbite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Dossier pour bd-orbite</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      sfip: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        dossier: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mon-dossier-sfip&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Dossier du Système de fichiers interplanétaire</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="client" tabindex="-1">Client <a class="header-anchor" href="#client" aria-label="Permalink to &quot;Client&quot;">​</a></h3><p>Vous voudrez aussi probablement utiliser le client websocket qui est aussi disponible dans cette librairie. Celui-ci peut être lancé dans un processus séparé, se connecte au serveur local Constellation et vous pemettra de l&#39;utiliser comme s&#39;il s&#39;agissait d&#39;une instance Constellation normale. Alternativement, vous pouvez vous connecter au serveur à partir d&#39;un autre langage informatique.</p><div class="language-TypeScript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { lancerClient } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@constl/serveur&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> port</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5001</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Ou une autre valeur, selon \`lancerServeur\`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fermerClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lancerClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(port);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// On peut maintenant appeler des fonctions sur le client comme s&#39;il</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// s&#39;agissait d&#39;un client Constellation ordinaire :</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> noms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> oublierNoms</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.profil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">suivreNoms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> noms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Pour arrêter le suivi :</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">oublierNoms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Lorsqu&#39;on a fini :</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fermerClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div>`,29),l=[t];function p(r,h,o,k,d,c){return a(),i("div",null,l)}const E=s(n,[["render",p]]);export{g as __pageData,E as default};
