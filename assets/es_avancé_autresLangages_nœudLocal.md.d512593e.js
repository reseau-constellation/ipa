import{_ as s,c as n,o as a,a as l}from"./app.1dacbe65.js";const d=JSON.parse('{"title":"Nœud local","description":"","frontmatter":{},"headers":[{"level":2,"title":"Installation","slug":"installation","link":"#installation","children":[]},{"level":2,"title":"Utilisation","slug":"utilisation","link":"#utilisation","children":[]},{"level":2,"title":"Installation globale","slug":"installation-globale","link":"#installation-globale","children":[{"level":3,"title":"Ligne de commande","slug":"ligne-de-commande","link":"#ligne-de-commande","children":[]}]},{"level":2,"title":"Utilisation dans un autre projet","slug":"utilisation-dans-un-autre-projet","link":"#utilisation-dans-un-autre-projet","children":[{"level":3,"title":"Serveur","slug":"serveur","link":"#serveur","children":[]},{"level":3,"title":"Client","slug":"client","link":"#client","children":[]}]}],"relativePath":"es/avancé/autresLangages/nœudLocal.md"}'),e={name:"es/avancé/autresLangages/nœudLocal.md"},o=l(`<h1 id="nœud-local" tabindex="-1">Nœud local <a class="header-anchor" href="#nœud-local" aria-hidden="true">#</a></h1><p><a href="https://github.com/reseau-constellation/serveur-ws/actions/workflows/tests.yml" target="_blank" rel="noreferrer"><img src="https://github.com/reseau-constellation/serveur-ws/actions/workflows/tests.yml/badge.svg" alt="Serveur WS"></a></p><p>La librairie <code>@constl/serveur</code> vous permet de créer un nœud local Constellation et de le rendre accessible à d&#39;autres logiciels sur votre machine par l&#39;entremise d&#39;un serveur WS local.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>⚠️ Ce serveur <strong>local</strong> n&#39;est pas apte à être utilisé en tant que serveur publique ! Entre autres limitations, <strong>il n&#39;y a aucun contrôle d&#39;authentification et il donne accès illimité à un environnement Node.js</strong>. Il est donc configuré afin d&#39;être uniquement disponible sur localhost. Ce serveur est dédié uniquement à la communication entre processus sur le même ordinateur, lorsque différents processus veulent accéder au même nœud Constellation local.</p><p><strong>N&#39;exposez jamais le serveur WS Constellation sur un port publique.</strong></p></div><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-hidden="true">#</a></h2><p>Vous pouvez installer le serveur local Constellation ainsi :</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@constl/serveur</span></span>
<span class="line"></span></code></pre></div><h2 id="utilisation" tabindex="-1">Utilisation <a class="header-anchor" href="#utilisation" aria-hidden="true">#</a></h2><p>Si vous voulez tout simplement utiliser Constellation avec Python ou R, veuillez installer les librairies respectives <a href="https://github.com/reseau-constellation/client-python" target="_blank" rel="noreferrer">constellation-py</a>, <a href="https://github.com/reseau-constellation/Consellation.jl" target="_blank" rel="noreferrer">Constellation.jl</a> et <a href="https://github.com/reseau-constellation/client-r" target="_blank" rel="noreferrer">constellation-R</a> (en progrès). Celles-ci se chargeront automatiquement de lancer le serveur Constellation.</p><h2 id="installation-globale" tabindex="-1">Installation globale <a class="header-anchor" href="#installation-globale" aria-hidden="true">#</a></h2><p>L&#39;installation globale vous permet de lancer un nœud local Constellation de la ligne de commande. Si vous comptez simplement utiliser le serveur Constellation (y compris pour une analyse en Python, en R ou en Julia), installez-le comme suit :</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@constl/serveur</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@constl/ipa</span></span>
<span class="line"></span></code></pre></div><h3 id="ligne-de-commande" tabindex="-1">Ligne de commande <a class="header-anchor" href="#ligne-de-commande" aria-hidden="true">#</a></h3><p>Vous pourrez ensuite lancer le nœud local en spécifiant (ou non) le port, l&#39;identifiant de compte, et les dossiers à utiliser pour sauvegarder les données de votre compte :</p><p><code>$ constl lancer [-p &lt;port&gt;] [--compte &lt;id-compte&gt;] [--doss-orbite &lt;dossierOrbite&gt;] [--doss-sfip &lt;dossierSFIP&gt;]</code></p><p>Si vous ne comprennez pas ce que font les options de compte ou de dossier, laissez-les vides et inquiétez-vous pas ; ça fonctionnera pareil.</p><p>Pour obtenir le numéro de la version :\`\`\`shell $ constl version</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">Pour obtenir de l&#39;aide :\`\`\`shell</span></span>
<span class="line"><span style="color:#A6ACCD;">$ constl -a</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="utilisation-dans-un-autre-projet" tabindex="-1">Utilisation dans un autre projet <a class="header-anchor" href="#utilisation-dans-un-autre-projet" aria-hidden="true">#</a></h2><p>Si vous voulez incorporer le serveur Constellation dans une autre librairie JavaScript, vous pouvez l&#39;installer ainsi :</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@constl/serveur</span></span>
<span class="line"></span></code></pre></div><p>Vous pourrez ensuite importer le serveur dans votre propre code et le lancer programmatiquement.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Constellation elle-même (<code>@constl/ipa</code>) est spécifiée en tant que dépendance pair du serveur Constellation. Vous pouvez donc installer la version de Constellation qui vous convient.</p></div><h3 id="serveur" tabindex="-1">Serveur <a class="header-anchor" href="#serveur" aria-hidden="true">#</a></h3><div class="language-JavaScript"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">lancerServeur</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@constl/serveur</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> fermerServeur</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> port </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">lancerServeur</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \`port\` contient maintenant le numéro de port à utiliser dans le client</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Lorsqu&#39;on a fini :</span></span>
<span class="line"><span style="color:#82AAFF;">fermerServeur</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>Invoqué sans configuration, <code>lancerServeur</code> trouvera un port disponible sur <code>localhost</code> et redonnera cette valeur dans la variable <code>port</code>. Vous pouvez également spécifier une configuration Constellation plus précise :</p><div class="language-TypeScript"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">lancerServeur</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@constl/serveur</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> fermerServeur</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> port </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">lancerServeur</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5003</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">optsConstellation</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">orbite</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">dossier</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mon-dossier-orbite</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// Dossier pour bd-orbite</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">sfip</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">dossier</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mon-dossier-sfip</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// Dossier du Système de fichiers interplanétaire</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="client" tabindex="-1">Client <a class="header-anchor" href="#client" aria-hidden="true">#</a></h3><p>Vous voudrez aussi probablement utiliser le client websocket qui est aussi disponible dans cette librairie. Celui-ci peut être lancé dans un processus séparé, se connecte au serveur local Constellation et vous pemettra de l&#39;utiliser comme s&#39;il s&#39;agissait d&#39;une instance Constellation normale. Alternativement, vous pouvez vous connecter au serveur à partir d&#39;un autre langage informatique.</p><div class="language-TypeScript"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">lancerClient</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@constl/serveur</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> port </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5001</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// Ou une autre valeur, selon \`lancerServeur\`</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> client</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fermerClient </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">lancerClient</span><span style="color:#A6ACCD;">(port)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// On peut maintenant appeler des fonctions sur le client comme s&#39;il</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// s&#39;agissait d&#39;un client Constellation ordinaire :</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> noms </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> oublierNoms </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> client</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">profil</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">suivreNoms</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> noms </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> x)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Pour arrêter le suivi :</span></span>
<span class="line"><span style="color:#82AAFF;">oublierNoms</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Lorsqu&#39;on a fini :</span></span>
<span class="line"><span style="color:#82AAFF;">fermerClient</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div>`,30),t=[o];function p(r,c,i,u,y,D){return a(),n("div",null,t)}const A=s(e,[["render",p]]);export{d as __pageData,A as default};
